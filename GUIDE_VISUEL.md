# ğŸ¯ GUIDE VISUEL - INTÃ‰GRATION DISCORD COMPLÃˆTE

## ğŸ“Š Vue d'ensemble du systÃ¨me

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ğŸŒ ClubStats Pro Web App                     â”‚
â”‚                  https://clubstats-pro.onrender.com             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Admin    â”‚ â”€â”€â”€> â”‚   Session    â”‚ â”€â”€â”€> â”‚  Vote Session  â”‚ â”‚
â”‚  â”‚  CrÃ©e      â”‚      â”‚   de Vote    â”‚      â”‚    Active      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    ğŸ“¡ API Endpoint       â”‚
         â”‚  /api/discord/sessions   â”‚
         â”‚  /api/discord/sync-vote  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ğŸ¤– Discord Bot (Render)                      â”‚
â”‚                                                                  â”‚
â”‚  1ï¸âƒ£  RÃ©cupÃ¨re sessions actives                                  â”‚
â”‚  2ï¸âƒ£  Envoie rappels 10h/14h/18h                                 â”‚
â”‚  3ï¸âƒ£  DÃ©tecte rÃ©actions emoji                                    â”‚
â”‚  4ï¸âƒ£  Synchronise votes en temps rÃ©el                            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚  messageReactionAdd Event      â”‚                             â”‚
â”‚  â”‚  User: _ibc â†’ âœ…               â”‚                             â”‚
â”‚  â”‚  SessionId: cmh58d234...       â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                â”‚                                                 â”‚
â”‚                â–¼                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚  syncVoteToAPI()               â”‚                             â”‚
â”‚  â”‚  POST /api/discord/sync-vote   â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   ğŸ’¾ PostgreSQL DB     â”‚
                         â”‚   â€¢ Votes table        â”‚
                         â”‚   â€¢ Players mapping    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   âœ… Vote enregistrÃ©   â”‚
                         â”‚   AffichÃ© sur le site  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flux dÃ©taillÃ© de synchronisation

```
Ã‰TAPE 1: Admin crÃ©e une session
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Site Web â†’ Base de donnÃ©es      â”‚
â”‚  Session crÃ©Ã©e: "Match samedi"   â”‚
â”‚  Date: 26/10/2025 15:00          â”‚
â”‚  Status: Active âœ…                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
Ã‰TAPE 2: Bot rÃ©cupÃ¨re les sessions
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GET /api/discord/sessions       â”‚
â”‚  Headers: x-api-key: 27795d...   â”‚
â”‚  Response: [                      â”‚
â”‚    {                              â”‚
â”‚      id: "cmh58d234...",          â”‚
â”‚      title: "Match samedi",      â”‚
â”‚      date: "2025-10-26T15:00"    â”‚
â”‚    }                              â”‚
â”‚  ]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
Ã‰TAPE 3: Bot envoie le rappel Discord
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ Canal Discord                 â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  ğŸ”” RAPPEL                        â”‚
â”‚  ğŸ—³ï¸ Match samedi                 â”‚
â”‚  ğŸ“… 26 oct. 2025, 15:00          â”‚
â”‚  ğŸ“Š Participation: 60% (6/10)    â”‚
â”‚                                   â”‚
â”‚  Votez avec les rÃ©actions:       â”‚
â”‚  âœ… PrÃ©sent                       â”‚
â”‚  âŒ Absent                        â”‚
â”‚  ğŸŸ¡ En retard                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
Ã‰TAPE 4: Joueur rÃ©agit
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ _ibc clique sur âœ…            â”‚
â”‚  Event: messageReactionAdd       â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  reaction.emoji.name = "âœ…"       â”‚
â”‚  user.id = "692651621812797470"  â”‚
â”‚  user.username = "_ibc"          â”‚
â”‚  sessionId = "cmh58d234..."      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
Ã‰TAPE 5: Bot dÃ©tecte la rÃ©action
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘ RÃ©action dÃ©tectÃ©e             â”‚
â”‚  _ibc â†’ present                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  response = "present"             â”‚
â”‚  (âœ… â†’ present)                   â”‚
â”‚  (âŒ â†’ absent)                    â”‚
â”‚  (ğŸŸ¡ â†’ late)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
Ã‰TAPE 6: Bot appelle l'API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /api/discord/sync-vote     â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  Headers:                         â”‚
â”‚    x-api-key: 27795d09...        â”‚
â”‚  Body:                            â”‚
â”‚  {                                â”‚
â”‚    "sessionId": "cmh58d234...",  â”‚
â”‚    "discordId": "69265162...",   â”‚
â”‚    "discordUsername": "_ibc",    â”‚
â”‚    "response": "present"         â”‚
â”‚  }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
Ã‰TAPE 7: API traite le vote
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Recherche mapping             â”‚
â”‚  discordId: 692651621...         â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  âœ… Mapping trouvÃ©!               â”‚
â”‚  Discord: _ibc                   â”‚
â”‚  Joueur: Iniesta667ekip          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¾ Enregistrement en BDD         â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  UPDATE votes SET                â”‚
â”‚    response = 'present',         â”‚
â”‚    playerName = 'Iniesta667ekip',â”‚
â”‚    updatedAt = NOW()             â”‚
â”‚  WHERE sessionId = 'cmh58d234'   â”‚
â”‚    AND playerName = 'Iniesta...' â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
Ã‰TAPE 8: API rÃ©pond
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… SuccÃ¨s                        â”‚
â”‚  {                                â”‚
â”‚    "success": true,              â”‚
â”‚    "message": "Vote updated",    â”‚
â”‚    "vote": {                     â”‚
â”‚      "id": "cmh58e7q4...",       â”‚
â”‚      "playerName": "Iniesta...", â”‚
â”‚      "response": "present"       â”‚
â”‚    },                             â”‚
â”‚    "action": "updated",          â”‚
â”‚    "mapped": true                â”‚
â”‚  }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
Ã‰TAPE 9: Bot envoie confirmation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ Message PrivÃ© Ã  _ibc         â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  âœ… Votre vote a Ã©tÃ© enregistrÃ©  â”‚
â”‚  RÃ©ponse: PrÃ©sent                â”‚
â”‚  Session: Match samedi           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
Ã‰TAPE 10: Affichage sur le site
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ ClubStats Pro                 â”‚
â”‚  Page: /vote/cmh58d234...        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  âœ… PrÃ©sents (7):                 â”‚
â”‚     â€¢ Iniesta667ekip â­           â”‚
â”‚     â€¢ Joueur2                    â”‚
â”‚     â€¢ ...                         â”‚
â”‚                                   â”‚
â”‚  ğŸ“Š Participation: 70% (7/10)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Structure des fichiers

```
clubstats-discord-bot/
â”‚
â”œâ”€â”€ ğŸ¤– BOTS
â”‚   â”œâ”€â”€ discord-bot-complete.js       â­ Bot principal (RECOMMANDÃ‰)
â”‚   â”œâ”€â”€ discord-bot-auto.js           ğŸ“… Rappels automatiques uniquement
â”‚   â””â”€â”€ discord-bot-polls.js          ğŸ—³ï¸ Sondages Discord natifs
â”‚
â”œâ”€â”€ ğŸ“‹ CONFIGURATION
â”‚   â”œâ”€â”€ .env                          ğŸ” Configuration (Ã€ CRÃ‰ER)
â”‚   â”œâ”€â”€ .env.complete.example         ğŸ“ Template de configuration
â”‚   â”œâ”€â”€ package.json                  ğŸ“¦ DÃ©pendances
â”‚   â””â”€â”€ prisma/                       ğŸ—„ï¸ SchÃ©ma base de donnÃ©es
â”‚
â”œâ”€â”€ ğŸ§ª TESTS
â”‚   â”œâ”€â”€ test-sync.sh                  âœ… Test connexion API
â”‚   â””â”€â”€ start.sh                      ğŸš€ DÃ©marrage guidÃ©
â”‚
â””â”€â”€ ğŸ“š DOCUMENTATION
    â”œâ”€â”€ README.md                     ğŸ“– Guide principal
    â”œâ”€â”€ GUIDE_COMPLET_SYNCHRONISATION.md  ğŸ“˜ Guide dÃ©taillÃ©
    â”œâ”€â”€ RECAPITULATIF_INTEGRATION.md  ğŸ“‹ RÃ©capitulatif complet
    â”œâ”€â”€ COMMANDES_RAPIDES.md          âš¡ Commandes utiles
    â””â”€â”€ GUIDE_VISUEL.md               ğŸ¯ Ce fichier
```

---

## ğŸ® Commandes Discord - Aide visuelle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ’¬ Dans Discord                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Vous tapez:                                                â”‚
â”‚  !aide                                                      â”‚
â”‚                                                              â”‚
â”‚  Bot rÃ©pond:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ğŸ¤– Aide du Bot de Vote                        â”‚        â”‚
â”‚  â”‚                                                â”‚        â”‚
â”‚  â”‚ Commandes:                                     â”‚        â”‚
â”‚  â”‚ â€¢ !rappel   â†’ Envoie un rappel manuel         â”‚        â”‚
â”‚  â”‚ â€¢ !sessions â†’ Liste les sessions actives      â”‚        â”‚
â”‚  â”‚ â€¢ !aide     â†’ Affiche cette aide              â”‚        â”‚
â”‚  â”‚                                                â”‚        â”‚
â”‚  â”‚ ğŸ—³ï¸ Voter:                                      â”‚        â”‚
â”‚  â”‚ RÃ©agissez avec âœ… âŒ ğŸŸ¡                        â”‚        â”‚
â”‚  â”‚                                                â”‚        â”‚
â”‚  â”‚ â° Rappels automatiques: 10h, 14h, 18h        â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vous tapez:                                                â”‚
â”‚  !sessions                                                  â”‚
â”‚                                                              â”‚
â”‚  Bot rÃ©pond:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ğŸ“‹ Sessions de vote actives                   â”‚        â”‚
â”‚  â”‚                                                â”‚        â”‚
â”‚  â”‚ 1. Match samedi                               â”‚        â”‚
â”‚  â”‚    ğŸ“… 26 oct. 2025, 15:00                     â”‚        â”‚
â”‚  â”‚    ğŸ“Š Participation: 70% (7/10)               â”‚        â”‚
â”‚  â”‚    âŒ Manquants: 3                            â”‚        â”‚
â”‚  â”‚                                                â”‚        â”‚
â”‚  â”‚ 2. EntraÃ®nement mardi                         â”‚        â”‚
â”‚  â”‚    ğŸ“… 29 oct. 2025, 19:00                     â”‚        â”‚
â”‚  â”‚    ğŸ“Š Participation: 50% (5/10)               â”‚        â”‚
â”‚  â”‚    âŒ Manquants: 5                            â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vous tapez:                                                â”‚
â”‚  !rappel                                                    â”‚
â”‚                                                              â”‚
â”‚  Bot rÃ©pond:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ğŸ”” RAPPEL MANUEL                              â”‚        â”‚
â”‚  â”‚                                                â”‚        â”‚
â”‚  â”‚ ğŸ—³ï¸ Match samedi                               â”‚        â”‚
â”‚  â”‚ ğŸ“… 26 octobre 2025, 15:00                     â”‚        â”‚
â”‚  â”‚                                                â”‚        â”‚
â”‚  â”‚ ğŸ“Š Participation: 70% (7/10)                  â”‚        â”‚
â”‚  â”‚ âœ… 7 ont votÃ© â€¢ âŒ 3 manquants                â”‚        â”‚
â”‚  â”‚                                                â”‚        â”‚
â”‚  â”‚ ğŸ”— Lien: https://clubstats-pro.../vote/...   â”‚        â”‚
â”‚  â”‚                                                â”‚        â”‚
â”‚  â”‚ â° Votez en rÃ©agissant ci-dessous !           â”‚        â”‚
â”‚  â”‚ âœ… PrÃ©sent                                    â”‚        â”‚
â”‚  â”‚ âŒ Absent                                     â”‚        â”‚
â”‚  â”‚ ğŸŸ¡ En retard                                  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  [RÃ©actions: âœ… âŒ ğŸŸ¡]                                      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ Variables d'environnement - Vue d'ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         .env                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ¤– DISCORD                                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  DISCORD_BOT_TOKEN=MTE1NDg...                                â”‚
â”‚    â†³ Token du bot (https://discord.com/developers)          â”‚
â”‚                                                               â”‚
â”‚  DISCORD_CHANNEL_ID=123456789012345678                       â”‚
â”‚    â†³ ID du canal pour les rappels                           â”‚
â”‚    â†³ Comment l'obtenir:                                      â”‚
â”‚       1. Activer Mode DÃ©veloppeur dans Discord               â”‚
â”‚       2. Clic droit sur le canal â†’ Copier l'identifiant     â”‚
â”‚                                                               â”‚
â”‚  ğŸ“¡ API                                                       â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  API_URL=https://clubstats-pro.onrender.com                 â”‚
â”‚    â†³ URL de votre API ClubStats                             â”‚
â”‚                                                               â”‚
â”‚  DISCORD_API_KEY=27795d09e04cd6576d8eb58b42825e94...        â”‚
â”‚    â†³ ClÃ© API pour authentifier les requÃªtes                 â”‚
â”‚    â†³ âš ï¸ DOIT Ãªtre identique sur le site et le bot           â”‚
â”‚    â†³ GÃ©nÃ©rer avec: openssl rand -hex 32                     â”‚
â”‚                                                               â”‚
â”‚  ğŸŒ APPLICATION                                               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  NEXT_PUBLIC_BASE_URL=https://clubstats-pro.onrender.com    â”‚
â”‚    â†³ URL publique du site (pour les liens de vote)          â”‚
â”‚                                                               â”‚
â”‚  PORT=3000                                                   â”‚
â”‚    â†³ 3000 pour local, 10000 pour Render                     â”‚
â”‚                                                               â”‚
â”‚  ğŸ’¾ BASE DE DONNÃ‰ES                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  DATABASE_URL="postgresql://user:pass@host:5432/db"         â”‚
â”‚    â†³ Connection string PostgreSQL                           â”‚
â”‚    â†³ Copier depuis /clubstats-pro/.env                      â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âš ï¸ IMPORTANT: DISCORD_API_KEY doit Ãªtre identique dans:
   â€¢ /clubstats-pro/.env (site web)
   â€¢ /clubstats-discord-bot/.env (bot Discord)
```

---

## ğŸ—ºï¸ Mapping Discord â†” Joueurs

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             MAPPING DISCORD â†’ JOUEURS SITE                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  OPTION 1: Mapping automatique (par username)               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                                              â”‚
â”‚  Discord Username: "Iniesta667"                             â”‚
â”‚           â†“ (recherche automatique)                         â”‚
â”‚  Joueur Site: "Iniesta667" âœ…                               â”‚
â”‚                                                              â”‚
â”‚  Vote enregistrÃ© au nom de: "Iniesta667"                   â”‚
â”‚                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  OPTION 2: Mapping manuel (par ID)                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                                              â”‚
â”‚  Discord ID: "692651621812797470"                           â”‚
â”‚  Discord Username: "_ibc"                                   â”‚
â”‚           â†“ (table: discord_player_mappings)                â”‚
â”‚  Player ID: "clh58d2340..."                                 â”‚
â”‚  Player Name: "Iniesta667ekip" âœ…                           â”‚
â”‚                                                              â”‚
â”‚  Vote enregistrÃ© au nom de: "Iniesta667ekip"               â”‚
â”‚                                                              â”‚
â”‚  Comment crÃ©er un mapping:                                  â”‚
â”‚  ```sql                                                      â”‚
â”‚  INSERT INTO discord_player_mappings                        â”‚
â”‚  (discord_id, discord_username, player_id)                  â”‚
â”‚  VALUES                                                      â”‚
â”‚  ('692651621812797470', '_ibc', 'clh58d2340...');          â”‚
â”‚  ```                                                         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ Avantages du mapping manuel:
   âœ… PrÃ©cision: Lien direct Discord ID â†” Player ID
   âœ… FlexibilitÃ©: Username Discord â‰  nom sur le site
   âœ… TraÃ§abilitÃ©: Historique des votes
```

---

## ğŸ“Š Dashboard de monitoring (conceptuel)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ“Š STATISTIQUES BOT DISCORD                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  ğŸ¤– Status Bot                                                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  â€¢ Ã‰tat: ğŸŸ¢ En ligne                                         â”‚
â”‚  â€¢ Uptime: 24h 15m 32s                                       â”‚
â”‚  â€¢ Latency: 42ms                                             â”‚
â”‚  â€¢ ConnectÃ© en tant que: Kay Voter#1234                      â”‚
â”‚                                                               â”‚
â”‚  ğŸ“ˆ Statistiques aujourd'hui (25 oct 2025)                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  â€¢ Rappels envoyÃ©s: 3 (10h, 14h, 18h)                       â”‚
â”‚  â€¢ Votes synchronisÃ©s: 47                                    â”‚
â”‚  â€¢ RÃ©actions dÃ©tectÃ©es: 52                                   â”‚
â”‚  â€¢ Erreurs: 0                                                â”‚
â”‚                                                               â”‚
â”‚  ğŸ—³ï¸ RÃ©partition des votes                                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  âœ… PrÃ©sent:   28 (59%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘         â”‚
â”‚  âŒ Absent:    15 (32%)  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â”‚
â”‚  ğŸŸ¡ En retard:  4 (9%)   â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘         â”‚
â”‚                                                               â”‚
â”‚  ğŸ‘¥ Top voteurs                                               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  1. Iniesta667ekip     12 votes                              â”‚
â”‚  2. Tlagss78           10 votes                              â”‚
â”‚  3. abdoufapes          8 votes                              â”‚
â”‚                                                               â”‚
â”‚  â° Prochains rappels                                         â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  â€¢ 26 oct, 10:00 (dans 9h 45m)                              â”‚
â”‚  â€¢ 26 oct, 14:00 (dans 13h 45m)                             â”‚
â”‚  â€¢ 26 oct, 18:00 (dans 17h 45m)                             â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Checklist de dÃ©ploiement

```
AVANT LE DÃ‰MARRAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Site Web
  â˜ Site dÃ©ployÃ© sur Render
  â˜ API /api/discord/sync-vote testÃ©e
  â˜ API /api/discord/sessions testÃ©e
  â˜ DISCORD_API_KEY dÃ©finie dans .env

Bot Discord
  â˜ Token Discord crÃ©Ã©
  â˜ Permissions configurÃ©es (MESSAGE CONTENT INTENT)
  â˜ Bot invitÃ© sur le serveur Discord
  â˜ ID du canal rÃ©cupÃ©rÃ©

Configuration Bot
  â˜ Fichier .env crÃ©Ã©
  â˜ DISCORD_BOT_TOKEN rempli
  â˜ DISCORD_CHANNEL_ID rempli
  â˜ DISCORD_API_KEY rempli (identique au site)
  â˜ API_URL rempli
  â˜ DATABASE_URL rempli
  â˜ npm install exÃ©cutÃ©

Tests
  â˜ ./test-sync.sh exÃ©cutÃ© avec succÃ¨s
  â˜ Bot dÃ©marre sans erreur
  â˜ Commande !aide fonctionne
  â˜ Commande !sessions fonctionne
  â˜ Commande !rappel fonctionne
  â˜ RÃ©actions dÃ©tectÃ©es
  â˜ Votes synchronisÃ©s
  â˜ Votes affichÃ©s sur le site

DÃ‰PLOIEMENT PRODUCTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Render
  â˜ Service crÃ©Ã© sur Render
  â˜ Variables d'environnement ajoutÃ©es
  â˜ Bot dÃ©ployÃ©
  â˜ Bot en ligne 24/7
  â˜ Logs accessibles

Monitoring
  â˜ VÃ©rifier les logs quotidiennement
  â˜ Surveiller les erreurs
  â˜ VÃ©rifier les rappels automatiques
  â˜ Tester la synchronisation rÃ©guliÃ¨rement

Documentation
  â˜ Ã‰quipe informÃ©e du fonctionnement
  â˜ Commandes Discord documentÃ©es
  â˜ ProcÃ©dure de dÃ©pannage disponible
```

---

## ğŸ‰ FÃ‰LICITATIONS !

Si vous avez suivi ce guide, vous avez maintenant :

âœ… Un bot Discord opÃ©rationnel
âœ… Une synchronisation automatique des votes
âœ… Des rappels automatiques 3x par jour
âœ… Un systÃ¨me de mapping Discord â†” Joueurs
âœ… Une documentation complÃ¨te

**Le systÃ¨me est prÃªt pour la production !** ğŸš€

---

ğŸ“ Support: Consultez les autres fichiers de documentation
ğŸ“š Guides: README.md, GUIDE_COMPLET_SYNCHRONISATION.md
âš¡ Commandes: COMMANDES_RAPIDES.md
